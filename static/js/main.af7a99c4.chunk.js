(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a(248)},248:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),c=a.n(i),s=a(36),o=a(65),l=a(20),u=a.n(l),d=a(37),m=a(93),h=a(94),p=a(109),f=a(95),v=a(110),b=a(96),g=a(5),w=a.n(g),E=a(27),k=a(47),y=a.n(k),S=a(48),D=a.n(S),x=a(46),C=a.n(x),O=Object(E.createMuiTheme)({palette:{primary:{light:y.a[300],main:y.a[500],dark:y.a[700]},secondary:{light:D.a[300],main:D.a[500],dark:D.a[700]}},typography:{useNextVariants:!0}});var A=function(e){return function(t){return r.a.createElement(E.MuiThemeProvider,{theme:O},r.a.createElement(C.a,null),r.a.createElement(e,t))}},L=a(49),j=a(23),P=a(101),T=a.n(P),N=a(29),I=a.n(N),M=a(104),R=a.n(M),H=a(51),B=a.n(H),F=a(99),G=a.n(F),W=a(38),Z=a.n(W),J=a(50),q=a.n(J),z=a(39),Y=a.n(z),$=a(107),V=a.n($),K=a(102),Q=a.n(K),U=a(35),X=a.n(U),_=a(105),ee=a.n(_),te=a(106),ae=a.n(te),ne=a(108),re=a.n(ne),ie=a(64),ce=a.n(ie),se=a(103),oe=a.n(se),le=a(100),ue=a.n(le),de={ZiveLab:["00:1b:c5:08:10","00:1b:c5:08:11","00:1b:c5:08:12","00:1b:c5:08:13","00:1b:c5:08:14","00:1b:c5:08:15","00:1b:c5:08:16","00:1b:c5:08:17","00:1b:c5:08:18","00:1b:c5:08:19","00:1b:c5:08:1a","00:1b:c5:08:1b","00:1b:c5:08:1c","00:1b:c5:08:1d","00:1b:c5:08:1e","00:1b:c5:08:1f"]};function me(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!function(e){if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e))return!0;return alert("You have entered an invalid IP address!"),!1}(e))return null;var a=e.substr(0,e.lastIndexOf(".")+1);return t?Array.from({length:255},function(e,t){return a+(t+1)}):Array.from({length:253},function(e,t){return a+(t+2)})}function he(e){return"ZiveLab"===function(e,t){var a=e.toLowerCase().split(":").slice(0,5).join(":");if(t&&de[t]&&de[t].indexOf(a)>-1)return t;if(-1===JSON.stringify(de).indexOf(a))return!1;for(var n in de)if(de[n].indexOf(a)>-1)return n}(e,"ZiveLab")}var pe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={openDrawer:!1,openSnackbar:!1,snackbarMessage:"",localIP:null,localDevices:[],remoteDevices:[],scanDevices:!1,isLocalScan:!1,isRemoteScan:!1,scanCompleted:0,scanTotal:0},a.handleDrawerOpen=function(){a.setState({openDrawer:!0})},a.handleDrawerClose=function(){a.setState({openDrawer:!1})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({openSnackbar:!1})},a.handleLocalClick=function(){a.findDevices(!0)},a.handleRemoteClick=function(){a.findDevices(!1)},a.ChannelHome=function(){return r.a.createElement("h1",null,"Getting Started")},a.ChannelTitle=function(){return r.a.createElement(X.a,{variant:"h6",color:"inherit",noWrap:!0},"ZiveLab Channels v0.1.0")},a.DeviceHome=function(){return r.a.createElement("h1",null,"Device will be rendered here")},a.DeviceTitle=function(e){var t=e.match.params;return r.a.createElement(X.a,{variant:"h6",color:"inherit",noWrap:!0},"Device ",t.id)},a.homeLink=function(e){return r.a.createElement(L.b,Object.assign({to:"/"},e))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"findDevices",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a,n,r,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t?"Scanning local devices...":"Scanning remote devices...",this.setState({openSnackbar:!0,snackbarMessage:a}),t||this.state.localIP){e.next=6;break}return e.next=6,this.getLocalIPAddressAsync();case 6:n=t?"169.254.17.1":this.state.localIP,r=me(n),this.setState({isLocalScan:t,isRemoteScan:!t,scanCompleted:0,scanTotal:r.length}),r.map(function(){var e=Object(d.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.loadAboutAsync(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getLocalIPAddressAsync",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise(function(e,t){var a=window.webkitRTCPeerConnection||window.mozRTCPeerConnection;a||t("Your browser does not support this API");var n=new a({iceServers:[]});n.createDataChannel("",{reliable:!1}),n.onicecandidate=function(t){if(t.candidate){var a=function(e){var t="";return e.split("\r\n").forEach(function(e){if(~e.indexOf("a=candidate")){var a=e.split(" "),n=a[4];"host"===a[7]&&(t=n)}else if(~e.indexOf("c=")){var r=e.split(" ")[2];t=r}}),t}("a="+t.candidate.candidate);e(a)}},n.createOffer(function(e){n.setLocalDescription(e)},function(e){console.warn("offer failed",e)})});case 3:(t=e.sent)&&this.setState({localIP:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadAboutAsync",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a,n,r,i,c,s,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="169"===t.split(".").slice(0,1),e.prev=1,n=new Request("http://"+t+"/about"),e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.json();case 9:if(!(i=e.sent)){e.next=15;break}if(he(i.MacAddress)){e.next=13;break}return e.abrupt("return");case 13:c={name:i.Model,serialNumber:i.SerialNumber,ipAddress:t,macAddress:i.MacAddress},a&&this.state.localDevices.filter(function(e){return e.ipAddress===t}).length<=0?this.setState({localDevices:[].concat(Object(o.a)(this.state.localDevices),[c])}):!a&&this.state.remoteDevices.filter(function(e){return e.ipAddress===t}).length<=0&&this.setState({remoteDevices:[].concat(Object(o.a)(this.state.remoteDevices),[c])});case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),a?(s=this.state.localDevices.filter(function(e){return e.ipAddress===t}),this.setState({localDevices:this.state.localDevices.filter(function(e){return e!==s})})):(l=this.state.remoteDevices.filter(function(e){return e.ipAddress===t}),this.setState({remoteDevices:this.state.remoteDevices.filter(function(e){return e!==l})}));case 21:return e.prev=21,this.setState({scanCompleted:this.state.scanCompleted+1}),e.finish(21);case 24:case"end":return e.stop()}},e,this,[[1,17,21,24]])}));return function(t){return e.apply(this,arguments)}}()},{key:"ScanProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{variant:"determinate",value:t,color:"secondary"}))}},{key:"linkTo",value:function(e){return"/device/"+e}},{key:"ListDevices",value:function(e){var t=this;return e?e.map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null),r.a.createElement(Z.a,{button:!0,key:e.ipAddress,component:(a=e.ipAddress,function(e){return r.a.createElement(L.b,Object.assign({to:t.linkTo(a)},e))})},r.a.createElement(q.a,null,r.a.createElement(ue.a,null)),r.a.createElement(Y.a,{primary:e.ipAddress})));var a}):r.a.createElement(r.a.Fragment,null)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,n=this.state,i=n.openDrawer,c=n.openSnackbar,o=n.snackbarMessage,l=this.state,u=l.localIP,d=l.localDevices,m=l.remoteDevices,h=this.state,p=h.isLocalScan,f=h.isRemoteScan,v=h.scanCompleted,b=h.scanTotal,g=b>0&&v<b,E=g?100*v/b:0;return console.log(v+"/"+b),r.a.createElement(L.a,null,r.a.createElement("div",{className:t.root},r.a.createElement(C.a,null),r.a.createElement(T.a,{position:"fixed",className:w()(t.appBar,Object(s.a)({},t.appBarShift,i))},r.a.createElement(Q.a,{disableGutters:!i},r.a.createElement(B.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:w()(t.menuButton,i&&t.hide)},r.a.createElement(oe.a,null)),r.a.createElement(j.a,{path:"/",exact:!0,component:this.ChannelTitle}),r.a.createElement(j.a,{path:"/device/:id",exact:!0,component:this.DeviceTitle}))),r.a.createElement(R.a,{className:t.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(B.a,{onClick:this.handleDrawerClose},"ltr"===a.direction?r.a.createElement(ee.a,null):r.a.createElement(ae.a,null))),r.a.createElement(I.a,null),r.a.createElement(Z.a,{button:!0,key:"about-nav",component:this.homeLink},r.a.createElement(Y.a,{primary:"Getting Started"})),r.a.createElement(I.a,null),r.a.createElement(Z.a,{button:!0,key:"local-devices-nav",onClick:this.handleLocalClick,disabled:g},r.a.createElement(q.a,null,r.a.createElement(ce.a,null)),r.a.createElement(Y.a,{primary:"My Devices"})),this.ScanProgress(!p||!g,E),this.ListDevices(d),r.a.createElement(I.a,null),r.a.createElement(Z.a,{button:!0,key:"remote-devices-nav",onClick:this.handleRemoteClick,disabled:g},r.a.createElement(q.a,null,r.a.createElement(ce.a,null)),r.a.createElement(Y.a,{primary:"Remote Devices",secondary:u})),this.ScanProgress(!f||!g,E),this.ListDevices(m),r.a.createElement(I.a,null)),r.a.createElement("main",{className:w()(t.content,Object(s.a)({},t.contentShift,i))},r.a.createElement("div",{className:t.drawerHeader}),r.a.createElement(j.a,{path:"/",exact:!0,component:this.ChannelHome}),r.a.createElement(j.a,{path:"/device/:id",exact:!0,component:this.DeviceHome})),r.a.createElement(V.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:c,autoHideDuration:2e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},o),action:[r.a.createElement(B.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:this.handleSnackbarClose},r.a.createElement(re.a,null))]})))}}]),t}(r.a.Component),fe=A(Object(E.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},badgeMargin:{margin:2*e.spacing.unit},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(b.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},{withTheme:!0})(pe));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(fe,null),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[111,1,2]]]);
//# sourceMappingURL=main.af7a99c4.chunk.js.map